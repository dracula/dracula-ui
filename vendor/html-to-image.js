!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.HTMLToImage=t():e.HTMLToImage=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";(function(e){var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,c)}a((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getBlobFromImageURL=t.svgToDataURL=t.createImage=t.getPixelRatio=t.getNodeHeight=t.getNodeWidth=t.toArray=t.canvasToBlob=t.getDataURLContent=t.toDataURL=t.isDataUrl=t.delay=t.getMimeType=t.getExtension=t.uuid=void 0;var o,i="application/font-woff",u={woff:i,woff2:i,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"};function c(e){var t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function a(e){var t=c(e).toLowerCase();return u[t]||""}function s(e){return e.split(/,/)[1]}function l(e,t){var n=window.getComputedStyle(e).getPropertyValue(t);return parseFloat(n.replace("px",""))}function f(){var t,n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}function h(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=n,r.crossOrigin="anonymous",r.src=e}))}t.uuid=(o=0,function(){return o+=1,"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+o}),t.getExtension=c,t.getMimeType=a,t.delay=function(e){return function(t){return new Promise((function(n){setTimeout((function(){n(t)}),e)}))}},t.isDataUrl=function(e){return-1!==e.search(/^(data:)/)},t.toDataURL=function(e,t){return"data:"+t+";base64,"+e},t.getDataURLContent=s,t.canvasToBlob=function(e){return e.toBlob?new Promise((function(t){return e.toBlob(t)})):function(e){return new Promise((function(t){for(var n=window.atob(e.toDataURL().split(",")[1]),r=n.length,o=new Uint8Array(r),i=0;i<r;i+=1)o[i]=n.charCodeAt(i);t(new Blob([o],{type:"image/png"}))}))}(e)},t.toArray=function(e){for(var t=[],n=0,r=e.length;n<r;n+=1)t.push(e[n]);return t},t.getNodeWidth=function(e){var t=l(e,"border-left-width"),n=l(e,"border-right-width");return e.scrollWidth+t+n},t.getNodeHeight=function(e){var t=l(e,"border-top-width"),n=l(e,"border-bottom-width");return e.scrollHeight+t+n},t.getPixelRatio=f,t.createImage=h,t.svgToDataURL=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(t){return[2,Promise.resolve().then((function(){return(new XMLSerializer).serializeToString(e)})).then(encodeURIComponent).then((function(e){return"data:image/svg+xml;charset=utf-8,"+e}))]}))}))},t.getBlobFromImageURL=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(t){return[2,h(e).then((function(t){var n=t.width,r=t.height,o=document.createElement("canvas"),i=o.getContext("2d"),u=f();return o.width=n*u,o.height=r*u,o.style.width=""+n,o.style.height=""+r,i.scale(u,u),i.drawImage(t,0,0),s(o.toDataURL(a(e)))}))]}))}))}}).call(this,n(6))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBlobFromURL=void 0;var r=n(0);t.getBlobFromURL=function(e,t){return t.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime()),(window.fetch?window.fetch(e).then((function(e){return e.blob()})).then((function(e){return new Promise((function(t,n){var r=new FileReader;r.onloadend=function(){return t(r.result)},r.onerror=n,r.readAsDataURL(e)}))})).then(r.getDataURLContent).catch((function(){return new Promise((function(e,t){return t()}))})):new Promise((function(t,n){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var i=new FileReader;i.onloadend=function(){t(r.getDataURLContent(i.result))},i.readAsDataURL(o.response)}else n(new Error("Failed to fetch resource: "+e+", status: "+o.status))},o.ontimeout=function(){n(new Error("Timeout of 30000ms occured while fetching resource: "+e))},o.responseType="blob",o.timeout=3e4,o.open("GET",e,!0),o.send()}))).catch((function(n){var r="";if(t.imagePlaceholder){var o=t.imagePlaceholder.split(/,/);o&&o[1]&&(r=o[1])}var i="Failed to fetch resource: "+e;return n&&(i="string"==typeof n?n:n.message),i&&console.error(i),r}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.embed=t.parseURLs=t.embedResources=t.shouldEmbed=void 0;var r=n(1),o=n(0),i=/url\((['"]?)([^'"]+?)\1\)/g;function u(e){return-1!==e.search(i)}function c(e){var t=[];return e.replace(i,(function(e,n,r){return t.push(r),e})),t.filter((function(e){return!o.isDataUrl(e)}))}function a(e,t,n,i,u){var c=n?function(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;var n=document.implementation.createHTMLDocument(),r=n.createElement("base"),o=n.createElement("a");n.head.appendChild(r),n.body.appendChild(o),t&&(r.href=t);return o.href=e,o.href}(t,n):t;return Promise.resolve(c).then((function(e){return u?u(e):r.getBlobFromURL(e,i)})).then((function(e){return o.toDataURL(e,o.getMimeType(t))})).then((function(n){return e.replace(new RegExp("(url\\(['\"]?)("+function(e){return e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}(t)+")(['\"]?\\))","g"),"$1"+n+"$3")})).then((function(e){return e}),(function(){return c}))}t.shouldEmbed=u,t.embedResources=function(e,t,n){return u(e)?Promise.resolve(e).then(c).then((function(r){return r.reduce((function(e,r){return e.then((function(e){return a(e,r,t,n)}))}),Promise.resolve(e))})):Promise.resolve(e)},t.parseURLs=c,t.embed=a},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,c)}a((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.toBlob=t.toJpeg=t.toPng=t.toPixelData=t.toCanvas=t.toSvgDataURL=t.toSvg=void 0;var i=n(4),u=n(7),c=n(8),a=n(9),s=n(10),l=n(0);function f(e,t){return void 0===t&&(t={}),{width:t.width||l.getNodeWidth(e),height:t.height||l.getNodeHeight(e)}}function h(e,t){return void 0===t&&(t={}),r(this,void 0,void 0,(function(){var n,r,l;return o(this,(function(o){return n=f(e,t),r=n.width,l=n.height,[2,i.cloneNode(e,t.filter,!0).then((function(e){return c.embedWebFonts(e,t)})).then((function(e){return u.embedImages(e,t)})).then((function(e){return s.applyStyleWithOptions(e,t)})).then((function(e){return a.createSvgDataURL(e,r,l)}))]}))}))}function d(e,t){return void 0===t&&(t={}),r(this,void 0,void 0,(function(){return o(this,(function(n){return[2,h(e,t).then(l.createImage).then(l.delay(100)).then((function(n){var r=document.createElement("canvas"),o=r.getContext("2d"),i=l.getPixelRatio(),u=f(e,t),c=u.width,a=u.height;return r.width=c*i,r.height=a*i,r.style.width=""+c,r.style.height=""+a,t.backgroundColor&&(o.fillStyle=t.backgroundColor,o.fillRect(0,0,r.width,r.height)),o.drawImage(n,0,0),r}))]}))}))}t.toSvg=h,t.toSvgDataURL=h,t.toCanvas=d,t.toPixelData=function(e,t){return void 0===t&&(t={}),r(this,void 0,void 0,(function(){var n,r,i;return o(this,(function(o){return n=f(e,t),r=n.width,i=n.height,[2,d(e,t).then((function(e){return e.getContext("2d").getImageData(0,0,r,i).data}))]}))}))},t.toPng=function(e,t){return void 0===t&&(t={}),r(this,void 0,void 0,(function(){return o(this,(function(n){return[2,d(e,t).then((function(e){return e.toDataURL()}))]}))}))},t.toJpeg=function(e,t){return void 0===t&&(t={}),r(this,void 0,void 0,(function(){return o(this,(function(n){return[2,d(e,t).then((function(e){return e.toDataURL("image/jpeg",t.quality||1)}))]}))}))},t.toBlob=function(e,t){return void 0===t&&(t={}),r(this,void 0,void 0,(function(){return o(this,(function(n){return[2,d(e,t).then(l.canvasToBlob)]}))}))}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,c)}a((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.cloneNode=void 0;var i=n(5),u=n(0);function c(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){return e instanceof HTMLCanvasElement?"data:,"===(t=e.toDataURL())?[2,Promise.resolve(e.cloneNode(!1))]:[2,u.createImage(t)]:e.tagName&&"svg"===e.tagName.toLowerCase()?[2,Promise.resolve(e).then((function(e){return u.svgToDataURL(e)})).then(u.createImage)]:[2,Promise.resolve(e.cloneNode(!1))]}))}))}function a(e,t){return r(this,void 0,void 0,(function(){return o(this,(function(n){return t instanceof Element?[2,Promise.resolve().then((function(){return function(e,t){var n=window.getComputedStyle(e),r=t.style;n.cssText?r.cssText=n.cssText:u.toArray(n).forEach((function(e){r.setProperty(e,n.getPropertyValue(e),n.getPropertyPriority(e))}))}(e,t)})).then((function(){return i.clonePseudoElements(e,t)})).then((function(){return function(e,t){e instanceof HTMLTextAreaElement&&(t.innerHTML=e.value);e instanceof HTMLInputElement&&t.setAttribute("value",e.value)}(e,t)})).then((function(){return t}))]:[2,t]}))}))}function s(e,t,n){return r(this,void 0,void 0,(function(){return o(this,(function(i){return n||!t||t(e)?[2,Promise.resolve(e).then(c).then((function(n){return function(e,t,n){return r(this,void 0,void 0,(function(){var r;return o(this,(function(o){return 0===(r=u.toArray(e.childNodes)).length?[2,Promise.resolve(t)]:[2,r.reduce((function(e,r){return e.then((function(){return s(r,n)})).then((function(e){e&&t.appendChild(e)}))}),Promise.resolve()).then((function(){return t}))]}))}))}(e,n,t)})).then((function(t){return a(e,t)}))]:[2,Promise.resolve(null)]}))}))}t.cloneNode=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clonePseudoElements=void 0;var r,o=n(0);t.clonePseudoElements=function(e,t){[":before",":after"].forEach((function(n){return r.clonePseudoElement(e,t,n)}))},function(e){e.clonePseudoElement=function(e,t,n){var r=window.getComputedStyle(e,n),i=r.getPropertyValue("content");if(""!==i&&"none"!==i){var u=o.uuid(),c=document.createElement("style");c.appendChild(function(e,t,n){var r="."+e+":"+t,i=n.cssText?function(e){var t=e.getPropertyValue("content");return e.cssText+" content: "+t+";"}(n):function(e){return o.toArray(e).map((function(t){return t+": "+e.getPropertyValue(t)+(e.getPropertyPriority(t)?" !important":"")+";"})).join(" ")}(n);return document.createTextNode(r+"{"+i+"}")}(u,n,r)),t.className=t.className+" "+u,t.appendChild(c)}}}(r||(r={}))},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(e){r=u}}();var a,s=[],l=!1,f=-1;function h(){l&&a&&(l=!1,a.length?s=a.concat(s):f=-1,s.length&&d())}function d(){if(!l){var e=c(h);l=!0;for(var t=s.length;t;){for(a=s,s=[];++f<t;)a&&a[f].run();f=-1,t=s.length}a=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s.push(new p(e,t)),1!==s.length||l||c(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,c)}a((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.embedImages=void 0;var i=n(1),u=n(2),c=n(0);function a(e,t){return r(this,void 0,void 0,(function(){return o(this,(function(n){return e instanceof Element?[2,Promise.resolve(e).then((function(e){return function(e,t){return r(this,void 0,void 0,(function(){var n;return o(this,(function(r){return(n=e.style.getPropertyValue("background"))?[2,Promise.resolve(n).then((function(e){return u.embedResources(e,null,t)})).then((function(t){return e.style.setProperty("background",t,e.style.getPropertyPriority("background")),e}))]:[2,Promise.resolve(e)]}))}))}(e,t)})).then((function(e){return function(e,t){if(!(e instanceof HTMLImageElement)||c.isDataUrl(e.src))return Promise.resolve(e);return Promise.resolve(e.src).then((function(e){return i.getBlobFromURL(e,t)})).then((function(t){return c.toDataURL(t,c.getMimeType(e.src))})).then((function(t){return new Promise((function(n,r){e.onload=n,e.onerror=r,e.src=t}))})).then((function(){return e}),(function(){return e}))}(e,t)})).then((function(e){return function(e,t){return r(this,void 0,void 0,(function(){var n,r;return o(this,(function(o){return n=c.toArray(e.childNodes),r=n.map((function(e){return a(e,t)})),[2,Promise.all(r).then((function(){return e}))]}))}))}(e,t)}))]:[2,Promise.resolve(e)]}))}))}t.embedImages=a},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,c)}a((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getCssRules=t.embedWebFonts=t.parseWebFontRules=void 0;var i=n(0),u=n(2);function c(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){return[2,new Promise((function(t,n){e.ownerDocument||n(new Error("Provided element is not within a Document")),t(i.toArray(e.ownerDocument.styleSheets))})).then(a).then(s)]}))}))}function a(e){return r(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){return t=[],n=[],e.forEach((function(t){if("cssRules"in t)try{i.toArray(t.cssRules).forEach((function(e){e.type===CSSRule.IMPORT_RULE&&n.push(f(e.href,t).then(h).then((function(e){l(e).forEach((function(e){t.insertRule(e,t.cssRules.length)}))})).catch((function(e){console.log("Error loading remote css",e.toString())})))}))}catch(o){var r=e.find((function(e){return null===e.href}))||document.styleSheets[0];null!=t.href&&n.push(f(t.href,r).then(h).then((function(e){l(e).forEach((function(e){r.insertRule(e,t.cssRules.length)}))})).catch((function(e){console.log("Error loading remote stylesheet",e.toString())}))),console.log("Error inlining remote css file",o.toString())}})),[2,Promise.all(n).then((function(){return e.forEach((function(e){if("cssRules"in e)try{i.toArray(e.cssRules).forEach((function(e){t.push(e)}))}catch(t){console.log("Error while reading CSS rules from "+e.href,t.toString())}})),t}))]}))}))}function s(e){return e.filter((function(e){return e.type===CSSRule.FONT_FACE_RULE})).filter((function(e){return u.shouldEmbed(e.style.getPropertyValue("src"))}))}function l(e){if(void 0===e)return[];var t=e,n=[],r=new RegExp("(\\/\\*[\\s\\S]*?\\*\\/)","gi");t=t.replace(r,"");for(var o,i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");null!==(o=i.exec(t));)n.push(o[0]);t=t.replace(i,"");for(var u=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");null!==(o=u.exec(t));)n.push(o[0]);return n}function f(e,t){return fetch(e).then((function(t){return{url:e,cssText:t.text()}}),(function(e){console.log("ERROR FETCHING CSS: ",e.toString())}))}function h(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){return[2,e.cssText.then((function(t){var n=t,r=/url\(["']?([^"')]+)["']?\)/g,o=(n.match(/url\([^)]+\)/g)||[]).map((function(t){var o=t.replace(r,"$1");if(!o.startsWith("https://")){var i=e.url;o=new URL(o,i).href}return new Promise((function(e,r){fetch(o).then((function(e){return e.blob()})).then((function(r){var o=new FileReader;o.addEventListener("load",(function(r){n=n.replace(t,"url("+o.result+")"),e([t,o.result])})),o.readAsDataURL(r)})).catch(r)}))}));return Promise.all(o).then((function(){return n}))}))]}))}))}t.parseWebFontRules=c,t.embedWebFonts=function(e,t){return r(this,void 0,void 0,(function(){return o(this,(function(n){return[2,c(e).then((function(e){return Promise.all(e.map((function(e){var n=e.parentStyleSheet?e.parentStyleSheet.href:null;return u.embedResources(e.cssText,n,t)})))})).then((function(e){return e.join("\n")})).then((function(t){var n=document.createElement("style"),r=document.createTextNode(t);return n.appendChild(r),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n),e}))]}))}))},t.getCssRules=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSvgDataURL=void 0;var r=n(0);t.createSvgDataURL=function(e,t,n){var o="http://www.w3.org/2000/svg",i=document.createElementNS(o,"svg"),u=document.createElementNS(o,"foreignObject");return i.setAttributeNS("","width",""+t),i.setAttributeNS("","height",""+n),u.setAttributeNS("","width","100%"),u.setAttributeNS("","height","100%"),u.setAttributeNS("","x","0"),u.setAttributeNS("","y","0"),u.setAttributeNS("","externalResourcesRequired","true"),i.appendChild(u),u.appendChild(e),r.svgToDataURL(i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyStyleWithOptions=void 0,t.applyStyleWithOptions=function(e,t){var n=e.style;return t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=t.width+"px"),t.height&&(n.height=t.height+"px"),t.style&&Object.assign(n,t.style),e}}])}));
